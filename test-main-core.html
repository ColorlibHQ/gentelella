<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Main Core Test | Gentelella</title>
    <link rel="icon" href="production/images/favicon.ico" type="image/ico" />
</head>

<body class="nav-md">
    <div class="container body">
        <div class="main_container">
            <div class="col-md-3 left_col">
                <div class="left_col scroll-view">
                    <div class="navbar nav_title" style="border: 0;">
                        <a href="index.html" class="site_title">
                            <i class="fas fa-paw"></i> 
                            <span class="logo-full">Gentelella</span>
                            <span class="logo-icon" style="display: none;">G</span>
                        </a>
                    </div>

                    <div class="clearfix"></div>

                    <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                        <div class="menu_section">
                            <h3>General</h3>
                            <ul class="nav side-menu">
                                <li><a><i class="fas fa-home"></i> Home <span class="fas fa-chevron-down"></span></a>
                                    <ul class="nav child_menu">
                                        <li><a href="#test1">Test Page 1</a></li>
                                        <li><a href="#test2">Test Page 2</a></li>
                                    </ul>
                                </li>
                                <li><a><i class="fas fa-edit"></i> Forms <span class="fas fa-chevron-down"></span></a>
                                    <ul class="nav child_menu">
                                        <li><a href="#form1">Form 1</a></li>
                                        <li><a href="#form2">Form 2</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="top_nav">
                <div class="nav_menu">
                    <div class="nav toggle">
                        <a id="menu_toggle"><i class="fas fa-bars"></i></a>
                    </div>
                    <h2>Main Core System Test</h2>
                </div>
            </div>

            <div class="right_col" role="main">
                <div class="page_title">
                    <div class="title_left">
                        <h3>Testing jQuery-Free Main Core System</h3>
                    </div>
                </div>

                <div class="clearfix"></div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="x_panel">
                            <div class="x_title">
                                <h4>Panel Toolbox Test</h4>
                                <ul class="nav navbar-right panel_toolbox">
                                    <li><a class="collapse-link"><i class="fas fa-chevron-up"></i></a></li>
                                    <li><a class="close-link"><i class="fas fa-times"></i></a></li>
                                </ul>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <p>This panel can be collapsed and closed using the toolbox icons above.</p>
                                <p>Testing modern DOM utilities with jQuery-free implementation.</p>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="x_panel">
                            <div class="x_title">
                                <h4>Progress Bar Test</h4>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div class="progress mb-3">
                                    <div class="progress-bar bg-success" role="progressbar" data-transitiongoal="75" style="width: 75%;">75%</div>
                                </div>
                                <div class="progress mb-3">
                                    <div class="progress-bar bg-info" role="progressbar" data-transitiongoal="60" style="width: 60%;">60%</div>
                                </div>
                                <div class="progress mb-3">
                                    <div class="progress-bar bg-warning" role="progressbar" data-transitiongoal="45" style="width: 45%;">45%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h4>Module Loading Test</h4>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div class="row">
                                    <div class="col-md-3">
                                        <button id="test-charts" class="btn btn-primary btn-block mb-3">Load Charts Module</button>
                                    </div>
                                    <div class="col-md-3">
                                        <button id="test-forms" class="btn btn-success btn-block mb-3">Load Forms Module</button>
                                    </div>
                                    <div class="col-md-3">
                                        <button id="test-tables" class="btn btn-info btn-block mb-3">Load Tables Module</button>
                                    </div>
                                    <div class="col-md-3">
                                        <button id="test-stats" class="btn btn-warning btn-block mb-3">Show Module Stats</button>
                                    </div>
                                </div>
                                <div id="test-results" class="mt-3">
                                    <p>Click buttons above to test dynamic module loading.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h4>System Status</h4>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <div id="system-status">
                                    <p>Checking system status...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/src/main-core.js"></script>
    <script>
        // Test script to validate main-core functionality
        window.addEventListener('load', function() {
            setTimeout(() => {
                const statusDiv = document.getElementById('system-status');
                const results = [];
                
                // Check if core utilities are available
                results.push(`‚úÖ DOM utilities: ${typeof window.DOM !== 'undefined' ? 'Available' : 'Missing'}`);
                results.push(`‚úÖ Bootstrap: ${typeof window.bootstrap !== 'undefined' ? 'Available' : 'Missing'}`);
                results.push(`‚úÖ loadModule function: ${typeof window.loadModule === 'function' ? 'Available' : 'Missing'}`);
                results.push(`‚úÖ Security utilities: ${typeof window.sanitizeHtml === 'function' ? 'Available' : 'Missing'}`);
                results.push(`‚úÖ Validation utilities: ${typeof window.ValidationUtils !== 'undefined' ? 'Available' : 'Missing'}`);
                results.push(`‚úÖ Module cache: ${typeof window.moduleCache !== 'undefined' ? 'Available' : 'Missing'}`);
                results.push(`‚úÖ Performance monitoring: ${typeof window.moduleLoadTimes !== 'undefined' ? 'Available' : 'Missing'}`);
                
                statusDiv.innerHTML = '<pre>' + results.join('\n') + '</pre>';
                
                // Set up button click handlers
                document.getElementById('test-charts').addEventListener('click', async function() {
                    const result = await window.loadModule('charts');
                    const resultsDiv = document.getElementById('test-results');
                    resultsDiv.innerHTML += `<p>üìä Charts module: ${result ? 'Loaded successfully' : 'Failed to load'}</p>`;
                });
                
                document.getElementById('test-forms').addEventListener('click', async function() {
                    const result = await window.loadModule('forms');
                    const resultsDiv = document.getElementById('test-results');
                    resultsDiv.innerHTML += `<p>üìù Forms module: ${result ? 'Loaded successfully' : 'Failed to load'}</p>`;
                });
                
                document.getElementById('test-tables').addEventListener('click', async function() {
                    const result = await window.loadModule('tables');
                    const resultsDiv = document.getElementById('test-results');
                    resultsDiv.innerHTML += `<p>üìã Tables module: ${result ? 'Loaded successfully' : 'Failed to load'}</p>`;
                });
                
                document.getElementById('test-stats').addEventListener('click', function() {
                    window.getModuleStats();
                    const resultsDiv = document.getElementById('test-results');
                    resultsDiv.innerHTML += `<p>üìä Module statistics displayed in console</p>`;
                });
                
                console.log('üöÄ Main Core Test Page Loaded Successfully');
                console.log('Available functions:', Object.keys(window).filter(key => 
                    typeof window[key] === 'function' && (
                        key.startsWith('loadModule') ||
                        key.startsWith('preload') ||
                        key.startsWith('getModule') ||
                        key.startsWith('sanitize') ||
                        key.startsWith('wait')
                    )
                ));
            }, 500);
        });
    </script>
</body>
</html>